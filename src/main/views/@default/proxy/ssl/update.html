{$layout}

<!-- 检测配置是否有更新 begins -->
<div class="ui icon message warning" v-if="statusChanged">
    <i class="exclamation circle icon large"></i>
    代理服务已被修改，<a href="" v-on:click.prevent="restart()">点此重启后生效</a>
</div>

{$var "header"}
<script type="text/javascript" src="/_/@default/proxy/@global.js"></script>
{$end}
<!--  检测配置是否有更新 end -->

<div>
    {$template "/proxy/menu"}

    <!-- HTTPS 设置 -->
    <form class="ui form" data-tea-action="/proxy/ssl/update" data-tea-success="submitSuccess">
        <input type="hidden" name="server" :value="proxy.filename"/>
        <table class="ui table definition">
            <tr>
                <td class="title">是否开启HTTPS</td>
                <td>
                    <div class="ui checkbox">
                        <input type="checkbox" name="httpsOn" v-model="httpsOn"/>
                        <label></label>
                    </div>
                </td>
            </tr>
            <tr>
                <td>证书文件</td>
                <td>
                    <span v-if="proxy.ssl != null && proxy.ssl.certificate.length > 0">{{proxy.ssl.certificate}}</span>

                    <input type="file" name="certFile" accept="application/x-pem-file, application/pkcs10, application/x-pkcs12, application/x-x509-user-cert, application/x-x509-ca-cert, application/pkix-cert"/>
                </td>
            </tr>
            <tr>
                <td>密钥文件</td>
                <td>
                    <span v-if="proxy.ssl != null && proxy.ssl.certificateKey.length > 0">{{proxy.ssl.certificateKey}}</span>
                    <input type="file" name="keyFile" accept="application/pkcs8"/>
                </td>
            </tr>
        </table>

        <button class="ui button primary" type="submit">保存</button>
    </form>
</div>